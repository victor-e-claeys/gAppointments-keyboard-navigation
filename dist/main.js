jQuery(document).ready(function(o){function t(e){var t=o("#gappointments_calendar .day_available.selected");if(0!==t.size()){if(e&&"next"===e||"prev"===e){var n="next"===e?"first":"last";0<t[e](".day_available").length?t[e](".day_available").trigger("click"):0<t.parent()[e+"All"]("tr:not(#gappointments_calendar_slots)").length&&t.parent()[e+"All"]("tr:not(#gappointments_calendar_slots)")[n]().find(".day_available")[n]().trigger("click")}}else o("#gappointments_calendar .day_available").first().trigger("click")}function n(e){(e&&"next"===e||"prev"===e)&&o("#gappointments_calendar .ga_appointments_calendar_header h3")[e]().trigger("click")}o(document).on("click","#gappointments_calendar .day_available",function(){o("#gappointments_day_selector").focus()}),o('<a id="gappointments_time_selector" href="#gappointments_calendar_slots">').on("keydown",function(e){if("ArrowDown"===e.key)o("#gappointments_calendar_slots .time_slot.focus").removeClass("focus").parent().next().find(".time_slot").addClass("focus");else if("ArrowUp"===e.key)o("#gappointments_calendar_slots .time_slot.focus").removeClass("focus").parent().prev().find(".time_slot").addClass("focus");else{if("Enter"!==e.key)return;o("#gappointments_calendar_slots .time_slot.focus").trigger("click")}"ArrowDown"!==e.key&&"ArrowUp"!==e.key||(o(o(this).attr("href")).find(".calendar_time_slots").scrollTop(o(o(this).attr("href")).find(".calendar_time_slots").scrollTop()+o("#gappointments_calendar_slots .time_slot.focus").parent().position().top-o(o(this).attr("href")).find(".calendar_time_slots").outerHeight()/2),e.preventDefault())}).on("focus",function(e){e.preventDefault(),o("#gappointments_calendar_slots .time_slot.focus").removeClass("focus"),o("#gappointments_calendar_slots .time_slot").first().addClass("focus"),window.scrollTo(0,o(o(this).attr("href")).offset().top)}).prependTo("#gappointments_calendar"),o('<a id="gappointments_day_selector" href="#service-working-days">').on("keydown",function(e){"ArrowRight"===e.key?t("next"):"ArrowLeft"===e.key&&t("prev")}).on("focus",function(e){e.preventDefault(),t(),window.scrollTo(0,o(o(this).attr("href")).offset().top)}).prependTo("#gappointments_calendar"),o('<a id="gappointments_month_selector" href="#gappointments_calendar">').on("keydown",function(e){"ArrowRight"===e.key?n("next"):"ArrowLeft"===e.key&&n("prev")}).on("focus",function(e){e.preventDefault(),window.scrollTo(0,o(o(this).attr("href")).offset().top)}).prependTo("#gappointments_calendar")});