jQuery(document).ready(function(n){function t(e){var t=n("#gappointments_calendar .day_available.selected");if(0!==t.size()){if(e&&"next"===e||"prev"===e){var a="next"===e?"first":"last";0<t[e](".day_available").length?t[e](".day_available").trigger("click"):0<t.parent()[e+"All"]("tr:not(#gappointments_calendar_slots)").length&&t.parent()[e+"All"]("tr:not(#gappointments_calendar_slots)")[a]().find(".day_available")[a]().trigger("click")}}else n("#gappointments_calendar .day_available").first().trigger("click")}function a(e){(e&&"next"===e||"prev"===e)&&n("#gappointments_calendar .ga_appointments_calendar_header h3")[e]().trigger("click")}n(document).on("click","#gappointments_calendar .day_available",function(){n("#gappointments_day_selector").focus()}),n(document).on("click","#gappointments_calendar #gappointments_calendar_slots .time_slot",function(){n("#gappointments_time_selector").focus()}),n('<a id="gappointments_time_selector" href="#gappointments_calendar_slots">').on("keydown",function(e){if("ArrowDown"===e.key&&0<n("#gappointments_calendar_slots .time_slot.focus").parent().next().length)n("#gappointments_calendar_slots .time_slot.focus").removeClass("focus").parent().next().find(".time_slot").addClass("focus");else if("ArrowUp"===e.key&&0<n("#gappointments_calendar_slots .time_slot.focus").parent().prev().length)n("#gappointments_calendar_slots .time_slot.focus").removeClass("focus").parent().prev().find(".time_slot").addClass("focus");else{if("Enter"!==e.key)return;n("#gappointments_calendar_slots .time_slot.focus").trigger("click")}"ArrowDown"!==e.key&&"ArrowUp"!==e.key&&"Enter"!==e.key||(e.preventDefault(),n(n(this).attr("href")).find(".calendar_time_slots").scrollTop(n(n(this).attr("href")).find(".calendar_time_slots").scrollTop()+n("#gappointments_calendar_slots .time_slot.focus").parent().position().top-n(n(this).attr("href")).find(".calendar_time_slots").outerHeight()/2),n(this).siblings(".message").text(n("#gappointments_calendar_slots .time_slot.focus").text()))}).on("focus",function(e){e.preventDefault(),0===n("#gappointments_calendar_slots .time_slot.focus").length&&n("#gappointments_calendar_slots .time_slot").first().addClass("focus"),window.scrollTo(0,n(n(this).attr("href")).offset().top)}).attr("aria-label",gappkn.navTimeLabel).prependTo("#gappointments_calendar"),n('<a id="gappointments_day_selector" href="#service-working-days" aria-label="Use left/right keys to select day">').on("keydown",function(e){"ArrowRight"===e.key?t("next"):"ArrowLeft"===e.key&&t("prev"),n(this).siblings(".message").text(n("#gappointments_calendar .day_available.selected").attr("date-go"))}).on("focus",function(e){e.preventDefault(),t(),window.scrollTo(0,n(n(this).attr("href")).offset().top)}).attr("aria-label",gappkn.navDayLabel).prependTo("#gappointments_calendar"),n('<a id="gappointments_month_selector" href="#gappointments_calendar">').on("keydown",function(e){"ArrowRight"===e.key?a("next"):"ArrowLeft"===e.key&&a("prev")}).on("focus",function(e){e.preventDefault(),window.scrollTo(0,n(n(this).attr("href")).offset().top)}).attr("aria-label",gappkn.navMonthLabel).prependTo("#gappointments_calendar"),n('<div class="message" role="status">').prependTo("#gappointments_calendar"),n(document).ajaxComplete(function(e){console.log(e),n("#gappointments_month_selector:focus").siblings(".message").text(n("#gappointments_calendar .ga_appointments_calendar_header h3").text()).blur().focus()})});